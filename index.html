<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Tap Counter — Single & Triple Tic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <style>
    :root { --bg:#0f172a; --fg:#e5e7eb; --bd:#334155; --card:#111827; --accent:#60a5fa; }
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;background:var(--bg);color:var(--fg);}
    .wrap{max-width:720px;margin:0 auto;padding:16px;height:100%;display:flex;flex-direction:column;gap:12px;}
    header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;}
    h1{font-size:18px;margin:0;opacity:.9;}
    .btn{appearance:none;border:1px solid var(--bd);background:var(--card);color:var(--fg);padding:8px 10px;border-radius:10px;cursor:pointer;}
    .tap{flex:1;display:flex;align-items:center;justify-content:center;border:2px dashed var(--bd);border-radius:16px;user-select:none;-webkit-user-select:none;touch-action:manipulation;}
    .count{font-size:96px;line-height:1;}
    .hint{text-align:center;opacity:.75;font-size:14px;}
    .pill{padding:6px 10px;border-radius:999px;background:var(--card);border:1px solid var(--bd);font-variant-numeric:tabular-nums;}
    .accent{color:var(--accent);}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Tap Counter</h1>
      <div>
        <button class="btn" id="change">Change X / Y</button>
        <button class="btn" id="reset">Reset</button>
      </div>
    </header>

    <div class="tap" id="pad"><div class="count" id="count">0</div></div>

    <div class="hint">
      Single tic → multiple of <span class="accent" id="xLabel">x</span><br>
      Triple tic → multiple of <span class="accent" id="yLabel">y</span>
    </div>
  </div>

  <script>
    let count = 0, x = 10, y = 25;
    let ctx = null;

    const elCount = document.getElementById('count');
    const elPad = document.getElementById('pad');
    const elX = document.getElementById('xLabel');
    const elY = document.getElementById('yLabel');

    function ensureAudio() {
      if (ctx) return;
      const AC = window.AudioContext || window.webkitAudioContext;
      ctx = new AC();
    }

    function beep(delay=0, freq=880, dur=80) {
      if (!ctx) return;
      const osc = ctx.createOscillator(), g = ctx.createGain();
      const start = ctx.currentTime + delay;
      const end = start + dur/1000;
      g.gain.setValueAtTime(0.0001, start);
      g.gain.linearRampToValueAtTime(0.2, start + 0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, end);
      osc.type = 'sine';
      osc.frequency.value = freq;
      osc.connect(g).connect(ctx.destination);
      osc.start(start);
      osc.stop(end);
    }

    function tic(n=1) {
      ensureAudio();
      for(let i=0;i<n;i++) beep(i*0.12, 880, 80);
      if (navigator.vibrate) navigator.vibrate(n>1? [60,40,60,40,60]:30);
    }

    function askValues() {
      let vx = parseInt(prompt("Enter X (single tic every multiple):", x) || x);
      let vy = parseInt(prompt("Enter Y (triple tic every multiple):", y) || y);
      if(vx>0) x=vx; if(vy>0) y=vy;
      localStorage.setItem('ticX',x);
      localStorage.setItem('ticY',y);
      elX.textContent=x; elY.textContent=y;
    }

    function update() {
      elCount.textContent = count;
      if (count % y === 0) tic(3);
      else if (count % x === 0) tic(1);
    }

    elPad.addEventListener('touchstart', ()=>{count++;update();},{passive:true});
    elPad.addEventListener('click', ()=>{count++;update();});
    document.getElementById('reset').onclick=()=>{count=0;elCount.textContent=0;};
    document.getElementById('change').onclick=askValues;

    // init
    x=parseInt(localStorage.getItem('ticX')||10,10);
    y=parseInt(localStorage.getItem('ticY')||25,10);
    elX.textContent=x; elY.textContent=y;
  </script>
</body>
</html>
